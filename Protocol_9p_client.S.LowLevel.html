<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Protocol_9p_client.S.KV_RO.html">
<link rel="Up" href="Protocol_9p_client.S.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Protocol_9p" rel="Chapter" href="Protocol_9p.html">
<link title="Protocol_9p_s" rel="Chapter" href="Protocol_9p_s.html">
<link title="Protocol_9p_request" rel="Chapter" href="Protocol_9p_request.html">
<link title="Protocol_9p_error" rel="Chapter" href="Protocol_9p_error.html">
<link title="Protocol_9p_response" rel="Chapter" href="Protocol_9p_response.html">
<link title="Protocol_9p_types" rel="Chapter" href="Protocol_9p_types.html">
<link title="Protocol_9p_client" rel="Chapter" href="Protocol_9p_client.html">
<link title="Protocol_9p_server" rel="Chapter" href="Protocol_9p_server.html">
<link title="Protocol_9p_info" rel="Chapter" href="Protocol_9p_info.html">
<link title="Protocol_9p_buffered9PReader" rel="Chapter" href="Protocol_9p_buffered9PReader.html">
<link title="Protocol_9p_filesystem" rel="Chapter" href="Protocol_9p_filesystem.html">
<link title="Protocol_9p_infix" rel="Chapter" href="Protocol_9p_infix.html"><title>Protocol_9p_client.S.LowLevel</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Protocol_9p_client.S.KV_RO.html" title="Protocol_9p_client.S.KV_RO">Previous</a>
&nbsp;<a class="up" href="Protocol_9p_client.S.html" title="Protocol_9p_client.S">Up</a>
&nbsp;</div>
<h1>Module <a href="type_Protocol_9p_client.S.LowLevel.html">Protocol_9p_client.S.LowLevel</a></h1>

<pre><span class="keyword">module</span> LowLevel: <code class="code"><span class="keyword">sig</span></code> <a href="Protocol_9p_client.S.LowLevel.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><hr width="100%">
<br>
The functions in this module are mapped directly onto individual 9P
        RPCs. The client must carefully respect the rules on managing fids
        and stay within the message size limits.<br>

<pre><span id="VALmaximum_write_payload"><span class="keyword">val</span> maximum_write_payload</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -> int32</code></pre><div class="info ">
The largest payload that can be written in one go.<br>
</div>

<pre><span id="VALallocate_fid"><span class="keyword">val</span> allocate_fid</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -> <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
<code class="code">allocate_fid t</code> returns a free fid. Callers must call <code class="code">deallocate_fid t</code>
        when they are finished with it.<br>
</div>

<pre><span id="VALdeallocate_fid"><span class="keyword">val</span> deallocate_fid</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -> <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -> unit Lwt.t</code></pre><div class="info ">
<code class="code">deallocate_fid t fid</code> clunks a fid and marks it as free for re-use.<br>
</div>

<pre><span id="VALwalk"><span class="keyword">val</span> walk</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -><br>       <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -><br>       <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -><br>       string list -> <a href="Protocol_9p_response.Walk.html#TYPEt">Protocol_9p_response.Walk.t</a> <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
<code class="code">walk t fid newfid wnames</code> binds <code class="code">newfid</code> to the result of Walking
        from <code class="code">fid</code> along the path given by <code class="code">wnames</code><br>
</div>

<pre><span id="VALopenfid"><span class="keyword">val</span> openfid</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -><br>       <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -><br>       <a href="Protocol_9p_types.OpenMode.html#TYPEt">Protocol_9p_types.OpenMode.t</a> -><br>       <a href="Protocol_9p_response.Open.html#TYPEt">Protocol_9p_response.Open.t</a> <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
<code class="code"><span class="keyword">open</span> t fid mode</code> confirms that <code class="code">fid</code> can be accessed according to
        <code class="code">mode</code><br>
</div>

<pre><span id="VALcreate"><span class="keyword">val</span> create</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -><br>       <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -><br>       ?extension:string -><br>       string -><br>       <a href="Protocol_9p_types.FileMode.html#TYPEt">Protocol_9p_types.FileMode.t</a> -><br>       <a href="Protocol_9p_types.OpenMode.html#TYPEt">Protocol_9p_types.OpenMode.t</a> -><br>       <a href="Protocol_9p_response.Create.html#TYPEt">Protocol_9p_response.Create.t</a> <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
<code class="code">create t fid name perm mode</code> creates a new file or directory
        called <code class="code">name</code> and with permissions <code class="code">perm</code> inside the directory
        <code class="code">fid</code> and opens it according to <code class="code">mode</code> (which is not checked
        against <code class="code">perm</code>).<br>
</div>

<pre><span id="VALstat"><span class="keyword">val</span> stat</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -><br>       <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -><br>       <a href="Protocol_9p_response.Stat.html#TYPEt">Protocol_9p_response.Stat.t</a> <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
<code class="code">stat t fid</code> returns a description of the file associated with <code class="code">fid</code><br>
</div>

<pre><span id="VALwstat"><span class="keyword">val</span> wstat</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -><br>       <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -><br>       <a href="Protocol_9p_types.Stat.html#TYPEt">Protocol_9p_types.Stat.t</a> -><br>       <a href="Protocol_9p_response.Wstat.html#TYPEt">Protocol_9p_response.Wstat.t</a> <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
<code class="code">wstat t fid stat</code> changes the file metadata according to <code class="code">stat</code>.<br>
</div>

<pre><span id="VALread"><span class="keyword">val</span> read</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -><br>       <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -><br>       int64 -> int32 -> <a href="Protocol_9p_response.Read.html#TYPEt">Protocol_9p_response.Read.t</a> <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
<code class="code">read t fid offset count</code> returns <code class="code">count</code> bytes of data at <code class="code">offset</code> in
        the file referenced by <code class="code">pid</code>. Note that <code class="code">count</code> must be less than the
        server's negotiated maximum message size.<br>
</div>

<pre><span id="VALwrite"><span class="keyword">val</span> write</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -><br>       <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -><br>       int64 -> Cstruct.t -> <a href="Protocol_9p_response.Write.html#TYPEt">Protocol_9p_response.Write.t</a> <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
<code class="code">write t fid offset data</code> writes <code class="code">data</code> to the file given by <code class="code">fid</code> at
        offset <code class="code">offset</code>. <code class="code">data</code> must not exceed <code class="code">maximum_write_payload t</code>.<br>
</div>

<pre><span id="VALclunk"><span class="keyword">val</span> clunk</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -><br>       <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -><br>       <a href="Protocol_9p_response.Clunk.html#TYPEt">Protocol_9p_response.Clunk.t</a> <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
<code class="code">clunk t fid</code> informs the server that the reference <code class="code">fid</code> should be
        forgotten about. When this call returns, it is safe for the client to
        re-use the fid.<br>
</div>

<pre><span id="VALremove"><span class="keyword">val</span> remove</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -><br>       <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -><br>       <a href="Protocol_9p_response.Remove.html#TYPEt">Protocol_9p_response.Remove.t</a> <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
<code class="code">remove t fid</code> removes the file associated with <code class="code">fid</code> from the file
        server. The server will "clunk" the fid whether the call succeeds or
        fails.<br>
</div>

<pre><span id="VALupdate"><span class="keyword">val</span> update</span> : <code class="type"><a href="Protocol_9p_client.S.html#TYPEt">Protocol_9p_client.S.t</a> -><br>       ?name:string -><br>       ?length:int64 -><br>       ?mode:<a href="Protocol_9p_types.FileMode.html#TYPEt">Protocol_9p_types.FileMode.t</a> -><br>       ?mtime:int32 -><br>       ?gid:string -> <a href="Protocol_9p_types.Fid.html#TYPEt">Protocol_9p_types.Fid.t</a> -> unit <a href="Protocol_9p_error.html#TYPEt">Protocol_9p_error.t</a> Lwt.t</code></pre><div class="info ">
Convenience wrapper around <code class="code">wstat</code>.<br>
</div>
</body></html>